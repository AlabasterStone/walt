import { memory: Memory } from 'env';

export type StringIterator = {
  length: i32,
  index: i32,
  addr: i32,
  start: i32,
  value: i32,
  done: i32
};
function decodeLEB(add: i32) : i64 {
  return 0;
}

export function next(iterator: StringIterator): StringIterator {
  if (iterator.length == 0 || iterator.index == iterator.length) {
    iterator.done = true;
    // iterator.value = 0;
    return iterator;
  }

  const leb: i64 = decodeLEB(iterator.addr);

  iterator = {
    index: iterator.index + 1,
    addr: ((leb >> 32) : i32),
    value: (leb : i32)
  };

  return iterator;
}

